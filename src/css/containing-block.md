# CSS 包含块（Containing Block）

## 基本概念
包含块是 CSS 布局中一个重要的概念，它是一个元素在进行定位和尺寸计算时所参考的矩形区域。每个元素都相对于其包含块进行布局，包含块的大小和位置决定了元素的布局表现。

## 包含块的确定规则
### 根元素（`<html>`）
根元素的包含块被称为初始包含块。在浏览器中，初始包含块通常是一个视口大小的矩形区域。

### 对于非根元素
1. **静态/相对定位元素/粘性定位元素/浮动元素**：包含块由最近的块级、表格单元格或行内块祖先元素的内容框 `（content box）` 创建。
2. **绝对定位元素**：包含块由最近的 `position` 属性值为 `relative`、`absolute`、`fixed` 或 `sticky` 的祖先的 `填充盒` 。如果没有这样的祖先元素，则包含块为初始包含块。
3. **固定定位元素（`position: fixed`）**：包含块为：若是有变形祖先则是最近 `变形祖先` 的 `填充盒` ，若是没有则为视口。

## 注意事项
### 定位和尺寸计算
- 绝对定位元素的 `top`、`right`、`bottom` 和 `left` 属性值是相对于其包含块的边界进行计算的。例如，如果一个绝对定位元素的 `top: 20px`，那么它将距离包含块的上边界 20 像素。
- 元素的 `width` 和 `height` 属性如果设置为百分比值，也是相对于其包含块的尺寸进行计算的。例如，`width: 50%` 表示元素的宽度为包含块宽度的一半。

### 包含块与层叠上下文
- 包含块和层叠上下文是两个不同的概念，但它们之间存在关联。创建层叠上下文的元素也可能成为其后代元素的包含块。
- 绝对定位元素的层叠顺序是相对于其包含块的层叠上下文进行计算的。

### 动态变化
- 包含块的大小和位置可能会随着页面布局的变化而动态改变。例如，当窗口大小改变或元素的样式属性被动态修改时，包含块的尺寸也会相应改变。
- 动态变化可能会导致元素的布局发生变化，因此在设计响应式布局时需要特别注意。

### 兼容性问题
- 不同浏览器对包含块的实现可能存在细微差异，特别是在处理一些复杂的布局场景时。在开发过程中，建议进行多浏览器测试，确保布局在不同浏览器中表现一致。